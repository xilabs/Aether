<html> 
    <head> 
        <title>
            Aether Portal
        </title> 
        <style>
            canvas { width: 100%; height: 100% }
        </style> 
    </head> 
    <body> 
        <script src="three.js" type="text/javascript"></script>
        <script src="render.js" type="text/javascript"></script>
        <script src="aetherObjects.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="jquery.mousewheel.js" type="text/javascript"></script>
        <script>
            $(document).ready(function(){
                var keydown;
                var mousedown = false;
                var mousePosX;
                var mousePosY;
                var startPosX;
                var startPosY;
                
                var u = new Universe();
                
                var moxel1 = u.createMoxel([1,1,0],5);
                var moxel2 = u.createMoxel([15,1,0],5);
                
                var portal = new Portal(u);
                
                portal.populateView();
                
                render = function() {
                    requestAnimationFrame(render);
                    portal.updateView();
                    portal.renderer.render(portal.scene, portal.camera);
                };
                
                render();
                
                $("#xpos").val(moxel1.position[0]);
                $("#ypos").val(moxel1.position[0]);
                
                $("#update").click(function() {
                    moxel1.position[0] = $("#xpos").val();
                    moxel1.position[1] = $("#ypos").val();
                    return false;
                });
                
                $("#portal").mousewheel(function(event, delta) {
                    portal.camera.position.z = portal.camera.position.z + delta;
                    return false;
                });
                
                $(document).keydown(function() {
                    keydown = event.which;
                });
                $(document).keyup(function() {
                    keydown = "";
                });
                
                $(document).mousemove(function(event) {
                    mousePosX = event.pageX;
                    mousePosY = event.pageY;
                    $("#xpos").val(mousePosX);
                    if(mousedown) {
                        if(keydown == 17) {
                           
                            portal.camera.position.x = portal.camera.position.x + ((startPosX - mousePosX)/100);
                            portal.camera.position.y = portal.camera.position.y + ((mousePosY - startPosY)/100);
                        }
                    }
                    
                    
                });
                
                $("#portal").mousedown(function() {
                    startPosX = mousePosX;
                    startPosY = mousePosY;
                    mousedown = true;
                });
                $("#portal").mouseup(function() {
                    mousedown = false;
                });
            });
        </script>
        <form>
            xpos <input type="text" id="xpos" size="3">
            ypos <input type="text" id="ypos" size="3">
            <input type="submit" value="update" id="update">
        </form>
    </body> 
</html>